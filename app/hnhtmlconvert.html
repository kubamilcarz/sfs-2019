
<div class="hn_post">
 <div class="hn_post_header">
   <div class="hn_post_hd_ls"><img class="hn_post_hdls_img" src="https://pbs.twimg.com/profile_images/1011303099196207105/XTIjie8O_bigger.jpg"/>
      <div class="hn_post_hdls_info"><span class="hn_posthdlsi_n">Kuba Milcarz</span><span class="hn_posthdlsi_d"><i class="far fa-clock"></i> 05.24.2018</span></div>
   </div>
   <div class="hn_post_hd_rs">
      <button class="hd_post_hdrs-d-t"></button>
      <ul class="hd_post_hdrs-dd hide">
        <li><a href="#">Edit</a></li>
        <li>
          <button>Delete</button>
        </li>
      </ul>
   </div>
 </div>
</div>


<div class="hide" id="hn_nav_notification-d-ol"></div>
<div class="hide" id="hn_nav_user-d-ol"></div>
<div class="hn_page_has_chat" id="hn_page">
  <div class="hn_page_container" id="hn_page_container">

    <div class="hn_page_right-side-columns clearfix">
      <div id="hn_page_right-column">
        <div class="hn_prc-panel hn_prc-foll"><span class="hn_prcp-t">Who to follow</span>
          <ul class="hn_prcf_list">
            <li><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-1/p200x200/19511494_780968788752461_1757222649295254114_n.jpg?_nc_cat=0&amp;oh=30a23ecf2f20aca002d196eebc657090&amp;oe=5BE29BEC"/>
              <div class="hn_prcfl_info"><span>Janek Max Pietruszka</span>
                <button class="hn_prcfli_f">Follow</button>
                <button>Visit</button>
              </div>
            </li>
            <li><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-1/p200x200/19511494_780968788752461_1757222649295254114_n.jpg?_nc_cat=0&amp;oh=30a23ecf2f20aca002d196eebc657090&amp;oe=5BE29BEC"/>
              <div class="hn_prcfl_info"><span>Janek Max Pietruszka</span>
                <button class="hn_prcfli_f">Follow</button>
                <button>Visit</button>
              </div>
            </li>
            <li><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-1/p200x200/19511494_780968788752461_1757222649295254114_n.jpg?_nc_cat=0&amp;oh=30a23ecf2f20aca002d196eebc657090&amp;oe=5BE29BEC"/>
              <div class="hn_prcfl_info"><span>Janek Max Pietruszka</span>
                <button class="hn_prcfli_f">Follow</button>
                <button>Visit</button>
              </div>
            </li>
          </ul><a class="hn_prcp-link" href="#">More</a>
        </div>
        <div class="hn_prc-panel hn_prc-footer">
          <div><span>&copy; Honet 2018</span><a href="#">About</a><a href="#">Terms</a><a href="#">Cookies</a><br/><a href="#">Privacy Policy</a><a href="#">Help Centre</a><a href="#">Change Language</a><br/><a href="#">Ads Info</a><a href="#">About</a><a href="#">Developers</a></div>
        </div>
      </div>
      <div id="hn_page_centre-column">
        <div class="hn_posts">
          <div class="hn_post">
            <div class="hn_post_header">
              <div class="hn_post_hd_ls"><img class="hn_post_hdls_img" src="https://pbs.twimg.com/profile_images/1011303099196207105/XTIjie8O_bigger.jpg"/>
                <div class="hn_post_hdls_info"><span class="hn_posthdlsi_n">Kuba Milcarz</span><span class="hn_posthdlsi_d"><i class="far fa-clock"></i> 05.24.2018</span></div>
              </div>
              <div class="hn_post_hd_rs">
                <button class="hd_post_hdrs-d-t"></button>
                <ul class="hd_post_hdrs-dd hide">
                  <li><a href="#">Edit</a></li>
                  <li>
                    <button>Delete</button>
                  </li>
                </ul>
              </div>
            </div>
            <div class="hn_post_content">
              <p>Maecenas iaculis iaculis mi, at auctor mauris. Nunc vitae libero vitae eros dapibus luctus. Etiam non felis a dui lacinia eleifend. Cras commodo varius enim.</p><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-9/36458666_1095901640563932_4453966195023937536_o.jpg?_nc_cat=0&amp;oh=ec37777293cbd650bf661a804892dea8&amp;oe=5BE1DCB2"/>
              <p>Sed eleifend dignissim urna, vitae tincidunt arcu tempor vitae. Curabitur tempus ac tellus ut scelerisque. Praesent cursus urna vel malesuada sodales. Suspendisse potenti. Ut consequat hendrerit bibendum. Cras tortor urna, finibus ac faucibus a, aliquet placerat ante. Proin a lacus eu dui tristique tincidunt. Cras hendrerit vel est vel tristique. Proin euismod, libero at vestibulum gravida, sem tortor blandit ipsum, sodales pretium quam arcu ut ex.</p>
            </div>
            <div class="hn_post_interactions">
              <button class="hn_post-thumbs">5</button>
              <button class="hn_post_i_btn">
                <div class="like-box"><i class="far fa-thumbs-up"></i><span>Like </span></div>
              </button>
              <label class="hn_post_i_btn"><i class="far fa-comment"></i><span>Comment </span>
                <button>19</button>
              </label>
            </div>
            <div class="hn_post_comments">
              <ul class="hn_post_com_box">
                <li><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-1/p200x200/19511494_780968788752461_1757222649295254114_n.jpg?_nc_cat=0&amp;oh=30a23ecf2f20aca002d196eebc657090&amp;oe=5BE29BEC"/>
                  <div class="hn_post_com_body"><a href="#">Janek Max Pietruszka</a> Dobre Pomarańczowe</div>
                </li>
                <li><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-1/p200x200/19511494_780968788752461_1757222649295254114_n.jpg?_nc_cat=0&amp;oh=30a23ecf2f20aca002d196eebc657090&amp;oe=5BE29BEC"/>
                  <div class="hn_post_com_body"><a href="#">Janek Max Pietruszka</a> Dobre Pomarańczowe, Dobre Pomarańczowe, Dobre Pomarańczowe!!</div>
                </li>
                <li><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-1/p200x200/19511494_780968788752461_1757222649295254114_n.jpg?_nc_cat=0&amp;oh=30a23ecf2f20aca002d196eebc657090&amp;oe=5BE29BEC"/>
                  <div class="hn_post_com_body"><a href="#">Janek Max Pietruszka</a> grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml</div>
                </li>
              </ul>
              <div class="hn_post_com_form"><img src="https://pbs.twimg.com/profile_images/1011303099196207105/XTIjie8O_bigger.jpg"/>
                <input type="text" placeholder="Write comment..."/>
                <button type="submit"><i class="fa fa-angle-right"></i></button>
              </div>
            </div>
          </div>
          <div class="hn_post">
            <div class="hn_post_content">
              <p>Maecenas iaculis iaculis mi, at auctor mauris. Nunc vitae libero vitae eros dapibus luctus. Etiam non felis a dui lacinia eleifend. Cras commodo varius enim.</p><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-9/36458666_1095901640563932_4453966195023937536_o.jpg?_nc_cat=0&amp;oh=ec37777293cbd650bf661a804892dea8&amp;oe=5BE1DCB2"/>
            </div>
            <div class="hn_post_interactions">
              <button class="hn_post-thumbs">5</button>
              <button class="hn_post_i_btn">
                <div class="like-box"><i class="far fa-thumbs-up"></i><span>Like </span></div>
              </button>
              <label class="hn_post_i_btn"><i class="far fa-comment"></i><span>Comment </span>
                <button>19</button>
              </label>
            </div>
            <div class="hn_post_comments">
              <ul class="hn_post_com_box">
                <li><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-1/p200x200/19511494_780968788752461_1757222649295254114_n.jpg?_nc_cat=0&amp;oh=30a23ecf2f20aca002d196eebc657090&amp;oe=5BE29BEC"/>
                  <div class="hn_post_com_body"><a href="#">Janek Max Pietruszka</a> Dobre Pomarańczowe</div>
                </li>
                <li><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-1/p200x200/19511494_780968788752461_1757222649295254114_n.jpg?_nc_cat=0&amp;oh=30a23ecf2f20aca002d196eebc657090&amp;oe=5BE29BEC"/>
                  <div class="hn_post_com_body"><a href="#">Janek Max Pietruszka</a> Dobre Pomarańczowe, Dobre Pomarańczowe, Dobre Pomarańczowe!!</div>
                </li>
                <li><img src="https://scontent-lht6-1.xx.fbcdn.net/v/t1.0-1/p200x200/19511494_780968788752461_1757222649295254114_n.jpg?_nc_cat=0&amp;oh=30a23ecf2f20aca002d196eebc657090&amp;oe=5BE29BEC"/>
                  <div class="hn_post_com_body"><a href="#">Janek Max Pietruszka</a> grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml grgml</div>
                </li>
              </ul>
              <div class="hn_post_com_form"><img src="https://pbs.twimg.com/profile_images/1011303099196207105/XTIjie8O_bigger.jpg"/>
                <input type="text" placeholder="Write comment..."/>
                <button type="submit"><i class="fa fa-angle-right"></i></button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>
</div>





<!-- old scrolling script for feed 12 june 2019  -->
<script type="text/javascript">
   let start = 0;
   let working = false;
   $(document).ready(function() {
      $.ajax({
         type: "GET",
         url: "http://localhost/sfstrue/app/api/feed.php?start="+start,
         processData: false,
         contentType: "application/json",
         data: '',
         success: function(r) {
            r = JSON.parse(r);
            for (var i = 0; i < r.length; i++) {
               $("#posts").append("<div class='post-panel'><h1>post "+i+"</h1></div>")
            }
            start += 5;
         },
         error: function(r) {
            console.log("Something went wrong while loading feed.");
         }
      })
   })
   $(window).scroll(function() {
      if ($(this).scrollTop() + 1 >= $("body").height() - $(window).height()) {
         if (working == false) {
            working = true;
            $.ajax({
               type: "GET",
               url: 'http://localhost/sfstrue/app/api/feed.php?start='+start,
               processData: false,
               contentType: "application/json",
               data: '',
               success: function(r) {
                  r = JSON.parse(r);
                  for (var i = 0; i < r.length; i++) {
                     $("#posts").append("<div class='post-panel'><h1>post "+i+"</h1></div>")
                  }
                  start += 5;
                  setTimout(function() {
                     working = false;
                  }, 2000)
               },
               error: function(r) {
                  console.log("Something went wrong while loading feed.");
               }
            })
         }
      }
   })

   $(function() {
      $(window).scroll(function(){
         let wscroll = $(window).scrollTop();
         var lastPostPosition = $('#posts > .last-element').position();
         // these are relative to the viewport, i.e. the window
         var lastPostPositionBottom = lastPostPosition.top;
         if (wscroll + 500 >= lastPostPositionBottom){
            let tok = <?php echo '"' . password_hash($_SESSION['accessToken'], PASSWORD_DEFAULT) . '"'; ?>;
            $.ajax({
               url: "http://localhost/sfstrue/app/api/feed.php",
               type: 'GET',
               data: {load: false, token: tok.toString(), userid: <?php echo Auth::loggedin(); ?>, type: 0, range: [$("#posts").children().length + 1, 3]},
               success: function(data) {
                  $("#posts .last-element").remove();
                  $('#posts .post-panel').last().removeClass('last-element');
                  $('#posts').append(data);
                  $('#posts .post-panel').last().addClass('last-element');
               }
            });
         }
      });
   });
</script>




// [
//    {“PostId": 31,"PostBody": "yufguygiy","PostedBy": "2028","PostDate": "2019-06-11 23:18:48","PostLikes": "0","PostComments": "0","PostPrivacy": "1"},
//    {"PostId": 30,"PostBody": "The rocket man is awesome movie. I highly recommend you guys this film!!!! ","PostedBy": "2028","PostDate": "2019-06-11 22:20:13","PostLikes": "0","PostComments": "0","PostPrivacy": "1"},
//    {"PostId": 29,"PostBody": "Alan tubaist I jego blog są spoko!","PostedBy": "2028","PostDate": "2019-06-11 22:12:49","PostLikes": "0","PostComments": "0","PostPrivacy": "1"},
//    {"PostId": 21,"PostBody": "KUBA 6","PostedBy": "2028","PostDate": "2019-05-20 17:02:43","PostLikes": "0","PostComments": "0","PostPrivacy": "1"},
//    {"PostId": 20,"PostBody": "KUBA 5","PostedBy": "2028","PostDate": "2019-05-20 17:02:40","PostLikes": "0","PostComments": "0","PostPrivacy": "1"}
// ]
//
// [
//    {“PostId”: 37,”PostBody”: “magus”,”PostedBy”: “2028”,”PostDate”: “2019-06-12 17:21:03”,”PostLikes”: “0”,”PostComments”: “0”,”PostPrivacy”: “1”},
//    {“PostId”: 36,”PostBody”: “Asasas”,”PostedBy”: “2028”,”PostDate”: “2019-06-12 17:19:46”,”PostLikes”: “0”,”PostComments”: “0”,”PostPrivacy”: “1”},
//    {“PostId”: 35,”PostBody”: “Janananana”,”PostedBy”: “2028”,”PostDate”: “2019-06-12 17:19:26”,”PostLikes”: “0”,”PostComments”: “0”,”PostPrivacy”: “1”},
//    {“PostId”: 34,”PostBody”: “Kolejny wpis lol “,”PostedBy”: “2028”,”PostDate”: “2019-06-12 15:24:49”,”PostLikes”: “0”,”PostComments”: “0”,”PostPrivacy”: “1”},
//    {“PostId”: 33,”PostBody”: “rehgerthr”,”PostedBy”: “2028”,”PostDate”: “2019-06-12 12:50:08”,”PostLikes”: “0”,”PostComments”: “0”,”PostPrivacy”: “1”}
// ]
